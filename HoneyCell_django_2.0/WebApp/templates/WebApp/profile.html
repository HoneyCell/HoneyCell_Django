{% extends "base.html" %}
{% load staticfiles %}


{% block javascript %}
    <!-- fullCalendar 2.2.5 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.2/moment.min.js"></script>
    <script src="{% static "WebApp/plugins/fullcalendar/fullcalendar.min.js" %}" type="text/javascript"></script>
{% endblock %}

{% block active_sidebar %}
    <!-- sidebar menu: : style can be found in sidebar.less -->
    <li class="treeview">
        <a href="{% url 'index' %}">
            <i class="fa fa-dashboard"></i> <span>Dashboard</span>
        </a>
    </li>

    <li class="treeview">
        <a href="#">
            <i class="fa fa-files-o"></i>
            <span>Tasks</span>
            <!-- <span class="label label-primary pull-right">4</span> -->
        </a>
        <ul class="treeview-menu">
            <li><a href="{% url "newTask" %}"><i class="fa fa-circle-o"></i> New Task</a></li>
            <li><a href="{% url "historyTask" %}"><i class="fa fa-circle-o"></i> History Tasks</a></li>
        </ul>
    </li>
    <li>
        <a href="{% url 'fileManage' %}"><i class="fa fa-folder"></i>File Management</a>
    </li>
    <li class="active">
        <a href="{% url 'profile' %}"><i class="fa fa-th"></i> <span>Profile</span></a>
    </li>
    <li>
        <a href="{% url 'global_page' %}"><i class="fa fa-book"></i> <span>Global</span></a>
    </li>
    <li>
        <a href="{% url "settings" %}"><i class="fa fa-pie-chart"></i> <span>Settings</span></a>
    </li>
{% endblock active_sidebar %}




{% block content_header %}
    Profile
{% endblock content_header %}

{% block content_breadcrumb %}
    <li><a href="{% url "index" %}"><i class="fa fa-dashboard"></i> Home</a></li>
    <li class="active">Profile</li>
{% endblock content_breadcrumb %}



{% block content_area %}

    <!-- Main content -->
    <section class="content">

        <div class="row">
            <div class="col-md-3">

                <!-- Profile Image -->
                <div class="box box-primary">
                    <div class="box-body box-profile">
                        {% if profile.image %}
                            <img class="profile-user-img img-responsive img-circle"
                                 src="{% url "get_user_picture" user.id %}" alt="User profile picture">
                        {% else %}
                            <img class="profile-user-img img-responsive img-circle"
                                 src="{% static "WebApp/img/anonymous_user.jpg" %}" alt="User profile picture">
                        {% endif %}
                        <h3 class="profile-username text-center"> {{ user.first_name }} {{ user.last_name }}</h3>
                        <p class="text-muted text-center"> {{ user.username }} </p>

                        <hr>
                        {% if profile.company %}
                            <strong><i class="fa fa-book margin-r-5"></i> Company </strong>
                            <p class="text-muted">{{ profile.company }}</p>
                        {% endif %}

                        {% if profile.location %}
                            <strong><i class="fa fa-map-marker margin-r-5"></i> Location </strong>
                            <p class="text-muted">{{ profile.location }}</p>
                        {% endif %}

                        {% if user.email %}
                            <strong><i class="fa fa-envelope margin-r-5"></i> Email </strong>
                            <p class="text-muted">{{ user.email }}</p>
                        {% endif %}

                        {% if profile.website %}
                            <strong><i class="fa fa-external-link margin-r-5"></i> Website </strong>
                            <p class="text-muted">{{ profile.website }}</p>
                        {% endif %}

                        {% if profile.time_created %}
                            <strong><i class="fa fa-clock-o margin-r-5"></i> Member Since </strong>
                            <p class="text-muted">{{ profile.time_created }}</p>
                        {% endif %}


                        <ul class="list-group list-group-unbordered">
                            {% if self %}
                                <li class="list-group-item">
                                    <b><a href="{% url 'followings' %}">Following</a></b> <a
                                        class="pull-right">{{ number_of_followings }}</a>
                                </li>
                                <li class="list-group-item">
                                    <b><a href="{% url 'followers' %}">Followers</a></b> <a
                                        class="pull-right">{{ number_of_followers }}</a>
                                </li>
                            {% else %}
                                <li class="list-group-item">
                                    <b>Followers</b>
                                    <p class="pull-right">{{ number_of_followers }}</p>
                                </li>
                                <li class="list-group-item">
                                    <b>Following</b>
                                    <p class="pull-right">{{ number_of_followings }}</p>
                                </li>
                            {% endif %}
                        </ul>

                        {% if self %}
                            <a class="btn btn-primary btn-block" disabled="disable"><b>Follow</b></a>
                        {% else %}

                            {% if is_followed %}
                                <a href="{% url 'unfollow' user.id %}" class="btn btn-primary btn-block"><b>Unfollow</b></a>
                            {% else %}
                                <a href="{% url 'follow' user.id %}" class="btn btn-primary btn-block"><b>Follow</b></a>
                            {% endif %}
                        {% endif %}


                    </div><!-- /.box-body -->
                </div><!-- /.box -->
            </div><!-- /.col -->


            <div class="col-md-9">
                <div class="nav-tabs-custom">
                    <ul class="nav nav-tabs">
                        <li class="active"><a href="#my_activities" data-toggle="tab">My Activities</a></li>
                        <li><a href="#followings_activities" data-toggle="tab">Followings Activities</a></li>
                        <li><a href="#followers_activities" data-toggle="tab">Followers Activities</a></li>
                    </ul>

                    
                    <div class="tab-content">
                       

                        <!-- Here are the contents for my activities -->
                        <div class="active tab-pane" id="my_activities">

                            {% if my_activities %}
                                <hr>
                                <!--  For loop starts from here -->
                                {% for my_activity in my_activities %}
                                    <div class="post">
                                        <div class="user-block">
                                            {% if user.profile.image %}
                                                <img class="img-circle img-bordered-sm"
                                                     src="{% url "get_user_picture" user.id %}" alt="user image">
                                            {% else %}
                                                <img class="img-circle img-bordered-sm"
                                                     src="{% static "WebApp/img/anonymous_user.jpg" %}"
                                                     alt="user image">
                                            {% endif %}
                                            <span class='username'>
                                              <a href="#">{{ user }}</a>
                                              <a href='#'
                                                 class='pull-right btn-box-tool'>{{ user.first_name }} {{ user.last_name }}</a>
                                            </span>
                                            <span class='description'>{{ my_activity.time_created }}</span>
                                        </div><!-- /.user-block -->


                                        <div class='box-body'>
                                            <p>{{ my_activity.description }}</p>

                                            {% if my_activity.task %}
                                                <div class="attachment-block clearfix">
                                                    <h4 class="attachment-heading"><a href="{% url 'taskDetail' my_activity.task.id %}">
                                                    {{my_activity.task.task_name}}
                                                    </a></h4>
                                                    <div class="attachment-text">
                                                        {{my_activity.task.task_description}}
                                                    </div><!-- /.attachment-text -->
                                                </div><!-- /.attachment-block -->
                                            {% else %}
                                                <!-- This activity do not have task, blank -->
                                            {% endif %}

                                            <span class='pull-right text-muted'>{{ my_activity.comment_set.all | length }} comments</span>
                                        </div>

                                        {% if my_activity.comment_set.all %}
                                            <div class='box-footer box-comments'>

                                                <!-- for all comments here -->
                                                <div class='box-comment'>
                                                    <!-- User image -->
                                                    <img class='img-circle img-sm'
                                                         src='{% static 'WebApp/img/user6.jpg' %}'
                                                         alt='user image'>
                                                    <div class='comment-text'>

                                                        <span class="username">
                                                            Maria Gonzales
                                                            <span class='text-muted pull-right'>8:03 PM Today</span>
                                                        </span>
                                                        <p class="comment-style"> GOOD JOB! </p>
                                                    </div>
                                                </div>
                                            </div>
                                        {% else %}
                                            <!-- No comment for this activity, blank -->
                                        {% endif %}

                                        <!-- Send comment to this activity -->
                                        <form class='form-horizontal'>
                                            <div class='form-group margin-bottom-none'>
                                                <div class='col-sm-9'>
                                                    <input class="form-control input-sm" placeholder="Comments">
                                                </div>
                                                <div class='col-sm-3'>
                                                    <button class='btn btn-primary pull-right btn-block btn-sm'>Send
                                                    </button>
                                                </div>
                                            </div>
                                        </form>
                                    </div><!-- /.post-->
                                {% endfor %}
                            {% else %}
                                <h1 align="center">Empty</h1>
                            {% endif %}
                        </div>



                        <!-- Here are the contents for followings' activities -->
                        <div class="tab-pane" id="followings_activities">

                            {% if followings_activities %}
                                <!--  For loop starts from here -->
                                {% for followings_activity in followings_activities %}
                                    <div class="post">
                                        <div class="user-block">
                                            <img class="img-circle img-bordered-sm"
                                                 src="{% static "WebApp/img/user2.jpg" %}"
                                                 alt="user image">
                                    <span class='username'>
                                      <a href="#">{{ followings_activity.user }}</a>
                                      <a href='#'class='pull-right btn-box-tool'>
                                      {{ followings_activity.user.first_name }} 
                                      {{ followings_activity.user.last_name }}
                                      </a>
                                    </span>
                                            <span class='description'>
                                                {{ followings_activity.time_created }}
                                            </span>
                                        </div>


                                        <div class='box-body'>
                                            <p>{{ followings_activity.description }}</p>

                                            {% if followings_activity.task %}
                                                <div class="attachment-block clearfix">
                                                    <h4 class="attachment-heading"><a href="{% url 'taskDetail' followings_activity.task.id %}">{{followings_activity.task.task_name}}</a></h4>
                                                    <div class="attachment-text">
                                                        {{ followings_activity.task.task_description }}
                                                    </div>
                                                </div>
                                            {% else %}
                                                <!-- No task for this activity, blank -->
                                            {% endif %}

                                            <span class='pull-right text-muted'>{{ followings_activity.comment_set.all | length }} comments</span>
                                        </div>


                                        {% if followings_activity.comment_set.all %}
                                            <!-- for all comments here -->
                                            <div class='box-footer box-comments'>

                                                <div class='box-comment'>
                                                    <!-- User image -->
                                                    <img class='img-circle img-sm'
                                                         src='{% static 'WebApp/img/user6.jpg' %}'
                                                         alt='user image'>
                                                    <div class='comment-text'>
                                                  <span class="username">
                                                    Maria Gonzales
                                                    <span class='text-muted pull-right'>8:03 PM Today</span>
                                                  </span><!-- /.username -->
                                                        <p class="comment-style"> GOOD JOB! </p>
                                                    </div><!-- /.comment-text -->
                                                </div>
                                            </div>
                                        {% else %}
                                            <!-- No comment for this activity, blank -->
                                        {% endif %}

                                        <form class='form-horizontal'>
                                            <div class='form-group margin-bottom-none'>
                                                <div class='col-sm-9'>
                                                    <input class="form-control input-sm" placeholder="Comments">
                                                </div>
                                                <div class='col-sm-3'>
                                                    <button class='btn btn-primary pull-right btn-block btn-sm'>Send
                                                    </button>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                {% endfor %}
                            {% else %}
                                <h1 align="center">Empty</h1>
                            {% endif %}
                        </div>


                        <!-- Here are the contents for followings' activities -->
                        <div class="tab-pane" id="followers_activities">

                            {% if followers_activities %}
                                <!--  For loop starts from here -->
                                {% for followers_activity in followers_activities %}
                                    <div class="post">
                                        <div class="user-block">
                                            <img class="img-circle img-bordered-sm"
                                                 src="{% static "WebApp/img/user2.jpg" %}"
                                                 alt="user image">
                                    <span class='username'>
                                      <a href="#">{{ followers_activity.user }}</a>
                                      <a href='#'
                                         class='pull-right btn-box-tool'>{{ followers_activity.user.first_name }} {{ followers_activity.user.last_name }}</a>
                                    </span>
                                            <span class='description'>{{ followers_activity.time_created }}</span>
                                        </div>


                                        <div class='box-body'>


                                            <p>{{ followers_activity.description }}</p>

                                            {% if followers_activity.task %}
                                                <div class="attachment-block clearfix">
                                                    <h4 class="attachment-heading"><a href="{% url 'taskDetail' followers_activity.task.id %}">
                                                    {{ followers_activity.task.task_name }}
                                                    </a></h4>
                                                    <div class="attachment-text">
                                                        {{ followers_activity.task.task_description }}
                                                    </div>
                                                </div>
                                            {% else %}
                                                <!-- No task for this activity, blank -->
                                            {% endif %}

                                            <span class='pull-right text-muted'>{{ followers_activity.comment_set.all | length }} comments</span>
                                        </div>


                                        {% if followers_activity.comment_set.all %}
                                            <!-- for all comments here -->
                                            <div class='box-footer box-comments'>

                                                <div class='box-comment'>
                                                    <!-- User image -->
                                                    <img class='img-circle img-sm'
                                                         src='{% static 'WebApp/img/user6.jpg' %}'
                                                         alt='user image'>
                                                    <div class='comment-text'>
                                                  <span class="username">
                                                    Maria Gonzales
                                                    <span class='text-muted pull-right'>8:03 PM Today</span>
                                                  </span><!-- /.username -->
                                                        <p class="comment-style"> GOOD JOB! </p>
                                                    </div><!-- /.comment-text -->
                                                </div>
                                            </div>
                                        {% else %}
                                            <!-- No comment for this activity, blank -->
                                        {% endif %}


                                        <form class='form-horizontal'>
                                            <div class='form-group margin-bottom-none'>
                                                <div class='col-sm-9'>
                                                    <input class="form-control input-sm" placeholder="Comments">
                                                </div>
                                                <div class='col-sm-3'>
                                                    <button class='btn btn-primary pull-right btn-block btn-sm'>Send
                                                    </button>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                {% endfor %}
                            {% else %}
                                <h4 align="center">You do not have any follower right now</h4>
                            {% endif %}
                        </div>

                </div>
            </div>
        </div>
    </section>
{% endblock %}



